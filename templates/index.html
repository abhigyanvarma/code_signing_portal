{% extends "layout.html" %}

{% block content %}
<!-- Hero Section -->
<section class="text-center py-5 bg-light">
  <div class="container">
    <h1 class="display-4 fw-bold">Secure & Easy Code Signing</h1>
    <p class="lead text-muted">
      Guarantee authenticity, integrity, and trust in your software with digital signatures.
    </p>

    <!-- Quick Actions -->
    <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
      <a href="{{ url_for('certs') }}" class="btn btn-primary btn-lg">Manage Certificates</a>
      <a href="{{ url_for('files_page') }}" class="btn btn-outline-primary btn-lg">Upload & Sign Files</a>
      <a href="{{ url_for('files_page') }}" class="btn btn-outline-secondary btn-lg">View Files</a>
      {% if not user %}
      <a href="{{ url_for('login') }}" class="btn btn-outline-dark btn-lg">Login</a>
      {% endif %}
    </div>
  </div>
</section>

<!-- Stepper Section -->
<section class="container py-5">
  <h2 class="text-center fw-bold mb-4">How It Works</h2>

  <div class="steps row justify-content-center text-center">

    <!-- Step 1 -->
    <div class="col-12 col-md-3 step mb-4 mb-md-0">
      <div class="circle bg-primary text-white mx-auto mb-3">1</div>
      <h5>Generate Private Key</h5>
      <p class="text-muted">
        Choose algorithm:<br>RSA or ECDSA.
      </p>
    </div>

    <!-- Step 2 -->
    <div class="col-12 col-md-3 step mb-4 mb-md-0">
      <div class="circle bg-primary text-white mx-auto mb-3">2</div>
      <h5>Create Certificate</h5>
      <p class="text-muted">
        Generate a self-signed certificate or CSR,<br>
        export to <code>.pfx</code>.
      </p>
    </div>

    <!-- Step 3 -->
    <div class="col-12 col-md-3 step mb-4 mb-md-0">
      <div class="circle bg-primary text-white mx-auto mb-3">3</div>
      <h5>Sign Executables</h5>
      <p class="text-muted">
        Use <strong>SignTool</strong> with SHA-256<br>
        and trusted timestamp.
      </p>
    </div>

    <!-- Step 4 -->
    <div class="col-12 col-md-3 step">
      <div class="circle bg-primary text-white mx-auto mb-3">4</div>
      <h5>Verify Signature</h5>
      <p class="text-muted">
        Confirm authenticity & integrity<br>
        before distribution.
      </p>
    </div>
  </div>
</section>

<!-- Accordion Section -->
<section class="container py-5">
  <h2 class="text-center fw-bold mb-4">Learn More</h2>
  <div class="accordion" id="infoAccordion">

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingOne">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
          What is a Digital Signature?
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#infoAccordion">
        <div class="accordion-body">
          A digital signature guarantees integrity and authenticity of a file. Windows uses signatures
          to display the publisher and warn users about untrusted software.
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingTwo">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
          What is a Digital Certificate?
        </button>
      </h2>
      <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#infoAccordion">
        <div class="accordion-body">
          A certificate binds a public key to the publisher identity (CN, O, OU).
          Certificates are issued by CAs or can be self-signed for internal testing.
        </div>
      </div>
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header" id="headingThree">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
          Signing Process (Self-signed)
        </button>
      </h2>
      <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#infoAccordion">
        <div class="accordion-body">
          <ol>
            <li>Generate a private key & self-signed certificate using OpenSSL.</li>
            <li>Export certificate to password-protected .pfx.</li>
            <li>Sign executables with SignTool (SHA-256) and add a timestamp.</li>
            <li>Verify signatures.</li>
          </ol>
          <p class="text-danger"><strong>Note:</strong> Self-signed certificates are not trusted by default.
            Install root cert or use CA-issued cert for production.</p>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- Styles -->
<style>
  .circle {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
  }
  .step {
    max-width: 220px;
  }
  .steps {
    gap: 1.5rem;
  }
</style>
{% endblock %}

